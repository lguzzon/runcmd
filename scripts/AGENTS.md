<!-- Generated by agents-reverse-engineer v1.2.12 -->

<!-- Generated by agents-reverse-engineer -->
# scripts

Git Flow automation CLI and library for branch management, release/hotfix handling, and repository synchronization. Provides modular command routing, branch lifecycle operations, version bumping, and changelog generation.

## Contents

[git-flow.js](./git-flow.js) — Main entry point with CLI command routing, git operations wrappers (`runGit`, `runGitFlow`, `checkout`, `mergeBranch`, `stashPush`), branch validation helpers, and colored logging (`logInfo`, `logError`, `logWarn`, `logSuccess`). Exports color constants and re-exports all symbols from `./lib/*`.

[release-init.js](./release-init.js) — CLI for initiating release/hotfix branches, delegates to `./operations/release.js` and `./operations/hotfix.js`. Parses `--type`, `--bump`, `--version`, `--push`, `--dry-run`, `--yes`, `--no-changelog`, `--offline` flags.

[release-finalize.js](./release-finalize.js) — CLI for finalizing release/hotfix branches, auto-detects branch type from `release/*` or `hotfix/*` globs, enforces clean tree and existence of main/develop. Parses `--type`, `--branch`, `--push`, `--dry-run`, `--yes`, `--no-changelog`, `--keep-branch`, `--json`, `--offline` flags.

[README.md](./README.md) — Documentation with command interface table, library exports, design patterns, environment variables, and contributing rules.

## Subdirectories

[commands/](./commands/) — CLI command handlers for git-flow operations: init, start, finish, publish, track, delete, list, config.

[lib/](./lib/) — Shared utilities: version.js (semver), changelog.js, prompts.js (CLI interaction).

[operations/](./operations/) — High-level workflows: clone, sync, release, hotfix.

## Architecture

```text
main() → command routing (help/install/init/start/finish/publish/track/delete/list/config/sync/clone/release/hotfix)
         ↓
   [commands/*.js] or [operations/*.js] handlers
         ↓
   [lib/*.js] utilities + git-flow.js git wrappers
```

Entry point `git-flow.js:main()` parses `process.argv.slice(2)` and routes to `./commands/*.js` for core git-flow operations or `./operations/*.js` for composite workflows.

## Stack

- **Runtime:** Bun (prompts.js shebang requires `#!/usr/bin/env bun`)
- **Module system:** ES modules
- **CLI entry points:** `bun scripts/git-flow.js`, `bun scripts/release-init.js`, `bun scripts/release-finalize.js`

## Patterns

- **CLI routing:** switch statement in `main()` dispatching to `handleXxxCommand()` or `handleXxxOperation()` functions
- **Handler signature:** async function accepting `opts` object with `help?`, `dryRun?`, operation-specific flags
- **Branch naming:** `${type}/${name}` pattern for feature/release/hotfix/support branches
- **Validation chain:** `ensureGitFlowAvailable()` → `ensureGitFlowInitialized()` → branch existence/tree state checks → operation execution
- **Exit codes:** 0 for success, 1 for errors

## Behavioral Contracts

Version regex from `release-finalize.js`: `v(\d+\.\d+\.\d+)$` extracts version from branch name (e.g., `release/v1.2.0` → `v1.2.0` tag).

Semver regex from `lib/version.js`: `/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)$/` enforces no leading zeros.

Branch validation regex from `git-flow.js`: `^[\w-]+$` for feature/release/hotfix/support branch names.

## Import Map

| Module | Exports |
|--------|---------|
| `./git-flow.js` | `logError`, `logInfo`, `logSuccess`, `logWarn`, `runGit`, `runGitFlow`, `ensureGitFlowAvailable`, `ensureGitFlowInitialized`, `ensureBranchExists`, `ensureBranchMissing`, `ensureCleanTree`, `getGitFlowConfig`, `stashPush`, `stashPop` |
| `./lib/version.js` | `parseVersion`, `compareVersions`, `bumpVersion`, `isValidVersion`, `validateVersion`, `incrementVersion`, `readVersion` |
| `./lib/changelog.js` | `generateChangelog`, `updateChangelog`, `parseCommitMessage`, `formatChangelogEntry`, `appendChangelog`, `commitChangelog` |
| `./lib/prompts.js` | `promptYesNo`, `promptText`, `promptChoice`, `confirmAction`, `promptTextSync` |
